(function(n){function F(a){return n.extend({},M,a)}function v(a,b,c){var d={};d[N+"transform"]=c?"translate3d(0, "+b+"px, 0)":"translate3d("+b+"px, 0, 0)";a.css(d)}function G(a){var b=a.start||0,c=a.end||0,d=a.dom,q=a.time,k=c-b,g=b,h=0,f=this.isVertical,e=this;this._aniTimer&&clearInterval(this._aniTimer);this._animating=!0;this._aniTimer=setInterval(function(){g=w[e.cfg.animation]?w[e.cfg.animation](h,b,k,q):w.linear(h,b,k,q);v(d,g,f);this.moveingDist=g;h+=10;h>=q&&(clearInterval(e._aniTimer),v(d,
c,f),a.cb&&a.cb.apply(e),e._animating=!1,e.cfg.onChange&&e.cfg.onChange.apply(e))},10)}function O(){this._animating&&(clearInterval(this._aniTimer),this._animating=!1,A.apply(this))}function P(a,b){var c=this;a.on(l.click,function(){c.prev()});b.on(l.click,function(){c.next()});this.jPrevBtn=a;this.jNextBtn=b}function Q(){var a=0,b=this.stepLength,c='<ol class="slider-steps">',d=this.cfg.indexFormat,q=this,e=null;for(a;a<b;a++)c+='<li class="step">'+(d?d.call(q,a):a)+"</li>";this.jWrapper.append(c+
"</ol>");this.jSteps=e=this.cfg.indexBind?this.jWrapper.find(".slider-steps").on(l.click,".step",function(){var a=n(this);a.hasClass("disable")||(a=e.find(".step").index(a),q.moveTo(a))}):this.jWrapper.find(".slider-steps")}function R(){var a=this.cfg,b=this.jBox,c=null,d=null,e=null,k=0,g=0,h=1,f="h"===a.dir?!1:!0,l,m,p;this.isVertical=f;this.jWrapper&&(n("<div></div>").append(b),this.jWrapper.after(b),this.jWrapper.remove(),delete this.jWrapper);b.wrap('<div class="slider-wrapper"><div class="slider-content"></div></div>');
this.jWrapper=d=b.closest(".slider-wrapper");this.jItems=c=b.children();this.jContent=e=d.find(".slider-content");a.ctrlBtn&&(d.append('<div class="slider-control"><span class="prev"><span class="prev-s"></span></span><span class="next"><span class="next-s"></span></span></div>'),P.call(this,d.find(".prev"),d.find(".next")),this.jCtrl=this.jWrapper.find(".slider-control"));1<c.length?(k=c.width(),g=c.height(),a.unlimit&&(b.append(c.clone()),h=2,2===c.length&&(b.append(c.clone()),h=3),this.jItems=
c=b.children()),this.multiple=h,p=c.length/h,f?(this.jItems.height(g),b.height(g*c.length),this.boxHeight=Math.ceil(b.height()/h),e.width(b.width()).height(g),m=this.boxHeight-this.jWrapper.height()+a.offset,this.currentTop=a.index*g):(this.jItems.width(k),b.width(k*c.length),this.boxWidth=Math.ceil(b.width()/h),e.height(b.height()),l=this.boxWidth-this.jWrapper.width()+a.offset,this.currentLeft=a.index*k),this.wrapperSize=f?d.height():d.width(),this.itemSize=f?g:k,this.moveUnit=0<a.unit?this.itemSize*
a.unit:this.wrapperSize,this.scope=f?m:l,this.stepLength=0<a.unit?Math.round(this.scope/this.moveUnit+1):Math.round(this.itemSize*p/this.wrapperSize),a.indexBtn&&Q.apply(this),this.moveTo(a.index,!0)):(this.multiple=1,k=c.width(),g=c.height(),this.wrapperSize=f?d.height():d.width(),this.itemSize=f?g:k,this.scope=this.moveUnit=0,this.stepLength=1,f?(b.height(g),e.width(b.width()),this.boxHeight=g,d.addClass("slider-no-effect"),this.currentTop=0):(b.width(k),e.height(b.height()),this.boxWidth=k,d.addClass("slider-no-effect"),
this.currentLeft=0),this.moveTo(0,!0))}function S(a){O.apply(this);this.touched=!0;p=H(a);B=r=!1;C=t=0;m.push(this);this.timer&&clearTimeout(this.timer)}function I(a){(e=m[0])&&e.cfg.drag&&!e.checkLock()?e.touched&&(u=H(a),T.call(e,e.isVertical?u.y-p.y:u.x-p.x),r&&a.preventDefault()):m.shift()}function J(a){e&&(e.cfg.drag&&(p={},u={},r&&U.apply(e),r=e.touched=!1),x.apply(e),e.moveingDist=0,e=null,m=[])}function K(a,b){if(this.isVertical&&Math.abs(a)>Math.abs(b)||!this.isVertical&&Math.abs(b)>Math.abs(a)){m.shift();
if(m.length){e=m[0];K.call(e,a,b);return}this.touched=r=!1}else r=!0;B=!0}function T(a){if(B){(t=0<a)&&this.checkLockPrev()&&(a=0);!t&&this.checkLockNext()&&(a=0);C=a;var b=this.isVertical,c=this.scope;a=(b?this.currentTop:this.currentLeft)+a;this.cfg.bounce||this.cfg.unlimit||(a=Math.min(0,Math.max(a,-1*c)));v(this.jBox,a,b);this.moveingDist=a}else K.call(this,u.x-p.x,u.y-p.y)}function U(){var a=this.currentIndex,b=this.moveUnit,c=Math.abs(C),d=0;0!==t&&(this.cfg.unlimit?t?this.prev():this.next():
(c>b/4&&(d=(t?-1:1)*Math.ceil(c/b)),a=Math.max(0,Math.min(a+d,this.stepLength-1)),this.moveTo(a)))}function V(){var a=this.currentIndex,b=this.stepLength,c=this.jPrevBtn,d=this.jNextBtn;this.cfg.unlimit?1===b&&(c.addClass("disable"),d.addClass("disable")):(0===a?c.addClass("disable"):c.removeClass("disable"),a===b-1?d.addClass("disable"):d.removeClass("disable"))}function W(){var a=this.currentIndex,b=this.stepLength;this.jSteps.find(".step").removeClass("current").eq(a%b).addClass("current")}function x(){var a=
this;this.cfg.autoPlay&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var b=a.currentIndex+1;a.cfg.unlimit||(b%=a.stepLength);a.moveTo(b);x.apply(a)},this.cfg.duration))}function A(){var a,b,c;this.cfg.unlimit&&!this.touched&&(a=this.currentIndex,b=this.stepLength,c=Math.ceil(this.jItems.length*this.itemSize/this.moveUnit),1<b&&(1>=a?this.setIndexTo(b+1):a>=c-2&&this.setIndexTo(c-2-b)))}function X(){var a=this.stepLength-1;this.jItems.each(function(b,c){b>a&&n(c).remove()})}
function Y(){var a=this;this.jContent.on(l.start,function(b){S.call(a,b)});D||(n(document).on(l.move,I).on(l.end,J),D=!0)}function L(){this.currentIndex=this.cfg.index;this.cfg.extendAnimate&&n.extend(w,this.cfg.extendAnimate);R.apply(this);Y.apply(this);x.apply(this);y++}function z(a,b){this.jBox=n(a);this.cfg=F(b||{});var c=!1;this.checkLock=function(){return c};this.lock=function(){c=!0;return this};this.unlock=function(){c=!1;return this};var d=!1,e=!1;this.checkLockPrev=function(){return d};
this.lockPrev=function(){d=!0;return this};this.unlockPrev=function(){d=!1;return this};this.checkLockNext=function(){return e};this.lockNext=function(){e=!0;return this};this.unlockNext=function(){e=!1;return this};L.apply(this);return this}var E="ontouchend"in document,l={click:"click",start:E?"touchstart":"mousedown",move:E?"touchmove":"mousemove",end:E?"touchend":"mouseup"},N=function(){var a=document.createElement("div").style,b=["WebkitT","MozT","MsT"],c="",d=0,e="";for(d;3>d;d++)if(c=b[d],
"undefined"!==typeof a[c+"ransform"]){e="-"+c.replace("T","").toLowerCase()+"-";break}return e}(),M={unlimit:!0,ctrlBtn:!0,indexBtn:!0,unit:1,offset:0,index:0,dir:"h",autoPlay:!1,duration:5E3,bounce:!0,drag:!0,indexBind:!0,noAnimate:!1,animation:"ease-out-back"},w={"ease-out-back":function(a,b,c,d){return c*((a=a/d-1)*a*(2.70158*a+1.70158)+1)+b},linear:function(a,b,c,d){return a/d*c+b}},p={},u={},r=!1,B=!1,t=!0,C=0,e=null,m=[],D=!1,y=0,H=function(a){a=a.originalEvent?a.originalEvent:a;var b=a.touches,
c=0,d=0;b?(c=b[0].pageX,d=b[0].pageY):(c=a.clientX,d=a.clientY);return{x:c,y:d}};z.prototype={prev:function(){var a=this.currentIndex-1;if(!(this.checkLock()||this.checkLockPrev()||!this.cfg.unlimit&&0>a))return this.moveTo(a),this},next:function(){var a=this.currentIndex+1;if(!(this.checkLock()||this.checkLockNext()||!this.cfg.unlimit&&a>=this.stepLength))return this.moveTo(a),this},setIndexTo:function(a){var b=this.isVertical,c=this.moveUnit,d=this.cfg.offset,e=0;if("NaN"!==a.toString())return e=
-1*a*c+d,v(this.jBox,e,b),this.currentIndex=a,this[b?"currentTop":"currentLeft"]=e,this},moveTo:function(a,b){var c=this.isVertical,d=this.jItems.length,e=this.moveUnit,k=this.scope,g=this.cfg.offset,h=this.stepLength,f=0;this.cfg.unlimit?1<h?(0>=a?(a=h,this.setIndexTo(a+1)):a>=d-1&&(a=d-1-h,this.setIndexTo(a-1)),f=-1*a*e+g):(a=0,f=g):(a%=d,f=Math.max(-1*a*e+g,-1*k));b||this.cfg.noAnimate?G.call(this,{dom:this.jBox,start:f,end:f,time:300,cb:A}):G.call(this,{dom:this.jBox,start:this.touched?this.moveingDist:
c?this.currentTop:this.currentLeft,end:f,time:300,cb:A});this.currentIndex=a;this[c?"currentTop":"currentLeft"]=f;this.jSteps&&W.apply(this);this.cfg.ctrlBtn&&V.apply(this);x.apply(this);return this},getIndex:function(){return this.currentIndex%this.stepLength},refresh:function(a){!0===this.cfg.unlimit&&X.apply(this);this.cfg=F(n.extend(this.cfg,a||{}));this.timer&&clearTimeout(this.timer);y--;L.apply(this);return this},destroy:function(){var a="";this.jWrapper.remove();for(a in this)delete this[a];
this.__proto__=null;y--;0===y&&(n(document).off(l.move,I).off(l.end,J),D=!1)}};"function"===typeof define&&define.amd?define([],function(){return z}):"undefined"!==typeof module&&module.exports?module.exports=z:window.NiceSlider=z})(window.jQuery||window.Zepto);