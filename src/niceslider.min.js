"use strict";!function(a){function b(b){return a.extend({},K,b)}function c(a,b,c){var d={};c?d.top=b+"px":d.left=b+"px",a.css(d)}function d(b){a.extend(L,b)}function e(a){var b=a.start||0,d=a.end||0,e=a.dom,f=a.time,g=d-b,h=b,i=10,j=0,k=this.isVertical,l=this;this._aniTimer&&clearInterval(this._aniTimer),this._animating=!0,this._aniTimer=setInterval(function(){h=L[l.cfg.animation]?L[l.cfg.animation](j,b,g,f):L.linear(j,b,g,f),c(e,h,k),this.moveingDist=h,j+=i,j>=f&&(clearInterval(l._aniTimer),c(e,d,k),a.cb&&a.cb.apply(l),l._animating=!1,l.cfg.onChange&&l.cfg.onChange.apply(l))},i)}function f(){this._animating&&(clearInterval(this._aniTimer),this._animating=!1,w.apply(this))}function g(a,b,c){e.call(this,{dom:this.jBox,start:a,end:b,time:c||300,cb:w})}function h(a,b){var c=this;a.on(J.click,function(){c.prev()}),b.on(J.click,function(){c.next()}),this.jPrevBtn=a,this.jNextBtn=b}function i(){var b=0,c=this.jItems,d=c.length,e='<ol class="slider-steps">',f=this.cfg.indexFormat,g=this,h=null;for(b;d>b;b++)e+='<li class="step">'+(f?f.call(g,b):b)+"</li>";e+="</ol>",this.jWrapper.append(e),h=this.cfg.indexBind?this.jWrapper.find(".slider-steps").on(J.click,".step",function(){var b=h.find(".step").index(a(this));g.moveTo(b)}):this.jWrapper.find(".slider-steps"),this.jSteps=h}function j(){var b='<div class="slider-wrapper"><div class="slider-content"></div></div>',c=this.cfg,d=this.jBox,e=null,f=null,g=null,j=0,k=0,l=1,m="h"===c.dir?!1:!0;if(this.isVertical=m,this.jWrapper){var n=a("<div></div>");n.append(d),this.jWrapper.after(d),this.jWrapper.remove(),delete this.jWrapper}d.wrap(b),this.jWrapper=f=d.closest(".slider-wrapper"),this.jItems=e=d.children(),this.jContent=g=f.find(".slider-content"),c.ctrlBtn&&(f.append('<div class="slider-control"><span class="prev"><span class="prev-s"></span></span><span class="next"><span class="next-s"></span></span></div>'),h.call(this,f.find(".prev"),f.find(".next")),this.jCtrl=this.jWrapper.find(".slider-control")),e.length>1?(c.indexBtn&&i.apply(this),c.unlimit&&(d.append(e.clone()),l=2,2===e.length&&(d.append(e.clone()),l=3),this.jItems=e=d.children()),this.multiple=l,this.realLength=e.length/l,this.itemWidth=j=e.width(),this.itemHeight=k=e.height(),m?(this.jItems.height(k),d.height(k*e.length),this.boxHeight=Math.ceil(d.height()/l),g.width(d.width()),this.rangeHeight=this.boxHeight-this.jWrapper.height()+c.offset,this.currentTop=c.index*this.itemHeight):(this.jItems.width(j),d.width(j*e.length),this.boxWidth=Math.ceil(d.width()/l),g.height(d.height()),this.rangeWidth=this.boxWidth-this.jWrapper.width()+c.offset,this.currentLeft=c.index*this.itemWidth),this.moveTo(c.index,!0)):(this.multiple=1,this.itemWidth=j=e.width(),this.itemHeight=k=e.height(),this.realLength=1,m?(d.height(k),g.width(d.width()),this.boxHeight=k,this.rangeHeight=0,f.addClass("slider-no-effect"),this.currentTop=0,this.moveTo(0,!0)):(d.width(j),g.height(d.height()),this.boxWidth=j,this.rangeWidth=0,f.addClass("slider-no-effect"),this.currentLeft=0,this.moveTo(0,!0)))}function k(a){f.apply(this),this.touched=!0,M=W(a),O=!1,P=!1,Q=0,R=0,T.push(this),this.timer&&clearTimeout(this.timer)}function m(a){S=T[0],S&&S.cfg.drag&&S.touched&&(N=W(a),p.call(S,S.isVertical?N.y-M.y:N.x-M.x),O&&a.preventDefault())}function n(a){S&&(S.cfg.drag&&(M={},N={},O&&r.apply(S),S.touched=!1,O=!1),v.apply(S),S.moveingDist=0,S=null,T=[])}function o(a,b){P||(P=!0,this.isVertical&&Math.abs(a)>Math.abs(b)||!this.isVertical&&Math.abs(b)>Math.abs(a)?(O=!1,this.touched=!1,T.shift(),T.length?P=!1:this.touched=!1):O=!0)}function p(a){return P?(Q=a>0,R=a,void q.call(this,a)):void o.call(this,N.x-M.x,N.y-M.y)}function q(a){var b=this.isVertical,d=b?this.currentTop:this.currentLeft,e=b?this.rangeHeight:this.rangeWidth,a=d+a;this.cfg.bounce||this.cfg.unlimit||(a=Math.min(0,Math.max(a,-1*e))),c(this.jBox,a,b),this.moveingDist=a}function r(){var a=this.isVertical,b=this.currentIndex,c=a?this.itemHeight:this.itemWidth,d=(this.jItems.length,this.realLength,Math.abs(R)),e=0;0!==Q&&(this.cfg.unlimit?Q?this.prev():this.next():(d>c/4&&(e=(Q?-1:1)*Math.ceil(d/c)),b+=e,b=Math.max(0,Math.min(b,this.realLength-1)),this.moveTo(b)))}function s(){var a=this.currentIndex,b=this.cfg,c=this.realLength,d=this.jPrevBtn,e=this.jNextBtn;b.unlimit?1===c&&(d.addClass("disable"),e.addClass("disable")):(0===a?d.addClass("disable"):d.removeClass("disable"),a===c-1?e.addClass("disable"):e.removeClass("disable"))}function t(){var a=this.currentIndex,b=(this.cfg,this.realLength);this.jPrevBtn,this.jNextBtn;this.jSteps.find(".step").removeClass("current").eq(a%b).addClass("current")}function u(){return this.currentIndex%l}function v(){var a=this,b=this.cfg;b.autoPlay&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var b=a.currentIndex+1;a.cfg.unlimit?a.moveTo(b):(b%=a.realLength,a.moveTo(b)),v.apply(a)},this.cfg.duration))}function w(){var a,b,c;this.cfg.unlimit&&!this.touched&&(a=this.currentIndex,b=this.realLength,c=this.jItems.length,b>1&&(1>=a?(a=b+1,this.setIndexTo(a)):a>=c-2&&(a=c-2-b,this.setIndexTo(a))))}function x(a,b){var c=this.isVertical,d=this.jItems.length,e=c?this.itemHeight:this.itemWidth,f=c?this.rangeHeight:this.rangeWidth,h=this.cfg.offset,i=(this.multiple,this.realLength),j=0;this.cfg.unlimit?i>1?(0>=a?(a=i,this.setIndexTo(a+1)):a>=d-1&&(a=d-1-i,this.setIndexTo(a-1)),j=-1*a*e+h):(a=0,j=h):(a%=d,j=Math.max(-1*a*e+h,-1*f)),b||this.cfg.noAnimate?g.call(this,j,j,0):g.call(this,this.touched?this.moveingDist:c?this.currentTop:this.currentLeft,j),this.currentIndex=a,this[c?"currentTop":"currentLeft"]=j,this.jSteps&&t.apply(this),this.cfg.ctrlBtn&&s.apply(this),v.apply(this)}function y(a){var b=this.isVertical,d=(this.jWrapper,this.jItems.length),e=b?this.itemHeight:this.itemWidth,f=this.cfg.offset,g=0;"NaN"!==a.toString()&&(a=parseInt(a,10)%d,g=-1*a*e+f,c(this.jBox,g,b),this.currentIndex=a,this[b?"currentTop":"currentLeft"]=g)}function z(){var a=this.currentIndex-1;if(this.cfg.unlimit)this.moveTo(a);else{if(0>a)return;this.moveTo(a)}}function A(){var a=this.currentIndex+1;if(this.cfg.unlimit)this.moveTo(a);else{if(a>=this.realLength)return;this.moveTo(a)}}function B(c){this.cfg.unlimit===!0&&C.apply(this),this.cfg=b(a.extend(this.cfg,c||{})),this.timer&&clearTimeout(this.timer),V--,G.apply(this)}function C(){var b=this.realLength-1;this.jItems.each(function(c,d){c>b&&a(d).remove()})}function D(){var a="";this.jWrapper.remove();for(a in this)delete this[a];this.__proto__=null,V--,0===V&&F()}function E(){var b=this;this.jContent.on(J.start,function(a){k.call(b,a)}),U||(a(document).on(J.move,m).on(J.end,n),U=!0)}function F(){a(document).off(J.move,m).off(J.end,n),U=!1}function G(){this.currentIndex=this.cfg.index,this.cfg.extendAnimate&&d(this.cfg.extendAnimate),j.apply(this),E.apply(this),v.apply(this),V++}function H(c,d){this.jBox=a(c),this.cfg=b(d||{}),G.apply(this)}var I="ontouchend"in document,J={click:"click",start:I?"touchstart":"mousedown",move:I?"touchmove":"mousemove",end:I?"touchend":"mouseup"},K={unlimit:!0,ctrlBtn:!0,indexBtn:!0,offset:0,index:0,dir:"h",autoPlay:!1,duration:5e3,bounce:!0,drag:!0,indexBind:!0,noAnimate:!1,animation:"ease-out-back"},L={"ease-out-back":function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},linear:function(a,b,c,d){return a/d*c+b}},M={},N={},O=!1,P=!1,Q=!0,R=0,S=null,T=[],U=!1,V=0,W=function(a){var a=a.originalEvent?a.originalEvent:a,b=a.touches,c=0,d=0;return b?(c=b[0].pageX,d=b[0].pageY):(c=a.clientX,d=a.clientY),{x:c,y:d}};H.prototype={prev:z,next:A,setIndexTo:y,moveTo:x,getIndex:u,refresh:B,destroy:D},"function"==typeof define&&define.amd?define([],function(){return H}):"undefined"!=typeof module&&module.exports?module.exports=H:window.NiceSlider=H}(window.jQuery||window.Zepto);