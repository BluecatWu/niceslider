(function(g){function E(a){return g.extend({},M,a)}function u(a,c,b){var d={};d[N+"transform"]=b?"translate3d(0, "+c+"px, 0)":"translate3d("+c+"px, 0, 0)";a.css(d)}function O(a){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||setTimeout)(a)}function F(a){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout)(a);return null}function G(a){function c(){l._at=O(function(){g=+new Date-e;h=
(y[l.cfg.animation]||y.linear)(g,b,P,k);u(m,h,f);g>=k?(F(l._at),u(m,d,f),a.cb&&a.cb.apply(l),l._isAni=!1,l.cfg.onChange&&l.cfg.onChange.apply(l)):c()})}var b=a.start||0,d=a.end||0,m=a.dom,k=a.time,P=d-b,h=b,e=+new Date,g=0,f=this.isVertical,l=this;this._at&&F(this._at);this._isAni=!0;c()}function Q(){this._isAni&&(clearInterval(this._at),this._isAni=!1,z.apply(this))}function R(a,c){var b=this;this.jPrev=a.on(f.click,function(){b.prev()});this.jNext=c.on(f.click,function(){b.next()})}function S(){var a=
0,c=this.stepLength,b='<ol class="slider-steps">',d=this.cfg.indexFormat,m=this,k=null;for(a;a<c;a++)b+='<li class="step">'+(d?d.call(m,a):a)+"</li>";this.jWrap.append(b+"</ol>");this.jSteps=k=this.cfg.indexBind?this.jWrap.find(".slider-steps").on(f.click,".step",function(){var a=g(this);a.hasClass("disable")||(a=k.find(".step").index(a),m.moveTo(a))}):this.jWrap.find(".slider-steps")}function T(){var a=this.cfg,c=this.jBox,b,d,m,k,e,h=1,f="h"===a.dir?!1:!0,n,p,l;this.isVertical=f;this.jWrap&&(g("<div></div>").append(c),
this.jWrap.after(c),this.jWrap.remove(),delete this.jWrap);c.wrap('<div class="slider-wrapper"><div class="slider-content"></div></div>');this.jWrap=d=c.closest(".slider-wrapper");this.jItem=b=c.children();this.jContent=m=d.find(".slider-content");a.ctrlBtn&&(d.append('<div class="slider-control"><span class="prev"><span class="prev-s"></span></span><span class="next"><span class="next-s"></span></span></div>'),R.call(this,d.find(".prev"),d.find(".next")),this.jCtrl=this.jWrap.find(".slider-control"));
1<b.length?(k=b.width(),e=b.height(),a.unlimit&&(c.append(b.clone()),h=2,2===b.length&&(c.append(b.clone()),h=3),this.jItem=b=c.children()),l=b.length/h,f?(this.jItem.height(e),c.height(e*b.length),b=Math.ceil(e*b.length/h),m.width(c.width()).height(e),p=b-this.jWrap.height()+a.offset,this.current=a.index*e):(this.jItem.width(k),c.width(k*b.length),b=Math.ceil(k*b.length/h),m.height(c.height()),n=b-this.jWrap.width()+a.offset,this.current=a.index*k),this.wrapperSize=f?d.height():d.width(),this.itemSize=
f?e:k,this.moveUnit=0<a.unit?this.itemSize*a.unit:this.wrapperSize,this.scope=f?p:n,this.stepLength=0<a.unit?Math.round(this.scope/this.moveUnit+1):Math.round(this.itemSize*l/this.wrapperSize),a.indexBtn&&S.apply(this),this.moveTo(a.index,!0)):(k=b.width(),e=b.height(),this.wrapperSize=f?d.height():d.width(),this.itemSize=f?e:k,this.scope=this.moveUnit=0,this.stepLength=1,f?(c.height(e),m.width(c.width())):(c.width(k),m.height(c.height())),d.addClass("slider-no-effect"),this.current=0,this.moveTo(0,
!0))}function U(a){Q.apply(this);this.touched=!0;p=H(a);A=q=!1;B=r=0;n.push(this);this.timer&&clearTimeout(this.timer)}function I(a){(e=n[0])&&e.cfg.drag&&!e.checkLock()?e.touched&&(t=H(a),V.call(e,e.isVertical?t.y-p.y:t.x-p.x),q&&a.preventDefault()):n.shift()}function J(a){e&&(e.cfg.drag&&(p={},t={},q&&W.apply(e),q=e.touched=!1),v.apply(e),e.moveDist=0,e=null,n=[])}function K(a,c){if(this.isVertical&&Math.abs(a)>Math.abs(c)||!this.isVertical&&Math.abs(c)>Math.abs(a)){n.shift();if(n.length){e=n[0];
K.call(e,a,c);return}this.touched=q=!1}else q=!0;A=!0}function V(a){if(A){(r=0<a)&&this.checkLockPrev()&&(a=0);!r&&this.checkLockNext()&&(a=0);B=a;var c=this.isVertical,b=this.scope;a=this.current+a;this.cfg.bounce||this.cfg.unlimit||(a=Math.min(0,Math.max(a,-1*b)));u(this.jBox,a,c);this.moveDist=a}else K.call(this,t.x-p.x,t.y-p.y)}function W(){var a=this.currentIndex,c=this.moveUnit,b=Math.abs(B),d=0;0!==r&&(this.cfg.unlimit?r?this.prev():this.next():(b>c/4&&(d=(r?-1:1)*Math.ceil(b/c)),a=Math.max(0,
Math.min(a+d,this.stepLength-1)),this.moveTo(a)))}function X(){var a=this.currentIndex,c=this.stepLength,b=this.jPrev,d=this.jNext;this.cfg.unlimit?1===c&&(b.addClass("disable"),d.addClass("disable")):(0===a?b.addClass("disable"):b.removeClass("disable"),a===c-1?d.addClass("disable"):d.removeClass("disable"))}function Y(){var a=this.currentIndex,c=this.stepLength;this.jSteps.find(".step").removeClass("current").eq(a%c).addClass("current")}function v(){var a=this;this.cfg.autoPlay&&(this.timer&&clearTimeout(this.timer),
this.timer=setTimeout(function(){var c=a.currentIndex+1;a.cfg.unlimit||(c%=a.stepLength);a.moveTo(c);v.apply(a)},this.cfg.duration))}function z(){var a,c,b;this.cfg.unlimit&&!this.touched&&(a=this.currentIndex,c=this.stepLength,b=Math.ceil(this.jItem.length*this.itemSize/this.moveUnit),1<c&&(1>=a?this.setIndexTo(c+1):a>=b-2&&this.setIndexTo(b-2-c)))}function Z(){var a=this.stepLength-1;this.jItem.each(function(c,b){c>a&&g(b).remove()})}function aa(){var a=this;this.jContent.on(f.start,function(c){U.call(a,
c)});C||(g(document).on(f.move,I).on(f.end,J),C=!0)}function L(){this.currentIndex=this.cfg.index;this.cfg.extendAnimate&&g.extend(y,this.cfg.extendAnimate);T.apply(this);aa.apply(this);v.apply(this);w++}function x(a,c){this.jBox=g(a);this.cfg=E(c||{});var b=!1;this.checkLock=function(){return b};this.lock=function(){b=!0;return this};this.unlock=function(){b=!1;return this};var d=!1,e=!1;this.checkLockPrev=function(){return d};this.lockPrev=function(){d=!0;return this};this.unlockPrev=function(){d=
!1;return this};this.checkLockNext=function(){return e};this.lockNext=function(){e=!0;return this};this.unlockNext=function(){e=!1;return this};L.apply(this);return this}var D="ontouchend"in document,f={click:"click",start:D?"touchstart":"mousedown",move:D?"touchmove":"mousemove",end:D?"touchend":"mouseup"},N=function(){var a=document.createElement("div").style,c=["WebkitT","MozT","MsT"],b,d=0,e;for(d;3>d;d++)if(b=c[d],""===a[b+"ransform"]){e="-"+b.replace("T","").toLowerCase()+"-";break}return e}(),
M={unlimit:!0,ctrlBtn:!0,indexBtn:!0,unit:1,offset:0,index:0,dir:"h",autoPlay:!1,duration:5E3,bounce:!0,drag:!0,indexBind:!0,noAnimate:!1,animation:"ease-out-back"},y={"ease-out-back":function(a,c,b,d){return b*((a=a/d-1)*a*(2.70158*a+1.70158)+1)+c},linear:function(a,c,b,d){return a/d*b+c}},p={},t={},q=!1,A=!1,r=!0,B=0,e=null,n=[],C=!1,w=0,H=function(a){a=a.originalEvent?a.originalEvent:a;var c=a.touches,b;c?(b=c[0].pageX,a=c[0].pageY):(b=a.clientX,a=a.clientY);return{x:b,y:a}};x.prototype={prev:function(){var a=
this.currentIndex-1;if(!(this.checkLock()||this.checkLockPrev()||!this.cfg.unlimit&&0>a))return this.moveTo(a),this},next:function(){var a=this.currentIndex+1;if(!(this.checkLock()||this.checkLockNext()||!this.cfg.unlimit&&a>=this.stepLength))return this.moveTo(a),this},setIndexTo:function(a){var c=this.isVertical,b=this.moveUnit,d=this.cfg.offset;if("NaN"!==a.toString())return b=-1*a*b+d,u(this.jBox,b,c),this.currentIndex=a,this.current=b,this},moveTo:function(a,c){var b=this.jItem.length,d=this.moveUnit,
e=this.scope,f=this.cfg.offset,g=this.stepLength,h=0;this.cfg.unlimit?1<g?(0>=a?(a=g,this.setIndexTo(a+1)):a>=b-1&&(a=b-1-g,this.setIndexTo(a-1)),h=-1*a*d+f):(a=0,h=f):(a%=b,h=Math.max(-1*a*d+f,-1*e));c||this.cfg.noAnimate?G.call(this,{dom:this.jBox,start:h,end:h,time:300,cb:z}):G.call(this,{dom:this.jBox,start:this.touched?this.moveDist:this.current,end:h,time:300,cb:z});this.currentIndex=a;this.current=h;this.jSteps&&Y.apply(this);this.cfg.ctrlBtn&&X.apply(this);v.apply(this);return this},getIndex:function(){return this.currentIndex%
this.stepLength},refresh:function(a){!0===this.cfg.unlimit&&Z.apply(this);this.cfg=E(g.extend(this.cfg,a||{}));this.timer&&clearTimeout(this.timer);w--;L.apply(this);return this},destroy:function(){var a="";this.jWrap.remove();for(a in this)delete this[a];this.__proto__=null;w--;0===w&&(g(document).off(f.move,I).off(f.end,J),C=!1)}};"function"===typeof define&&define.amd?define([],function(){return x}):"undefined"!==typeof module&&module.exports?module.exports=x:window.NiceSlider=x})(window.jQuery||
window.Zepto);