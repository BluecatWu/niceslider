"use strict";!function(a){function b(b){return a.extend({},M,b)}function c(a,b,c){var d={};c?d[L+"transform"]="translate3d(0, "+b+"px, 0)":d[L+"transform"]="translate3d("+b+"px, 0, 0)",a.css(d)}function d(b){a.extend(N,b)}function e(a){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||setTimeout)(a)}function f(a){return(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||clearTimeout)(a)}function g(a){function b(){o._aniTimer=e(function(){m=+new Date-l,k=(N[o.cfg.animation]||N.linear)(m,d,j,i),c(h,k,n),m>=i?(f(o._aniTimer),c(h,g,n),a.cb&&a.cb.apply(o),o._animating=!1,o.cfg.onChange&&o.cfg.onChange.apply(o)):b()})}var d=a.start||0,g=a.end||0,h=a.dom,i=a.time,j=g-d,k=d,l=+new Date,m=0,n=this.isVertical,o=this;this._aniTimer&&f(this._aniTimer),this._animating=!0,b()}function h(){this._animating&&(clearInterval(this._aniTimer),this._animating=!1,x.apply(this))}function i(a,b,c){g.call(this,{dom:this.jBox,start:a,end:b,time:c||300,cb:x})}function j(a,b){var c=this;this.jPrevBtn=a.on(K.click,function(){c.prev()}),this.jNextBtn=b.on(K.click,function(){c.next()})}function k(){var b=0,c=(this.jItems,this.stepLength),d='<ol class="slider-steps">',e=this.cfg.indexFormat,f=this,g=null;this.cfg;for(b;c>b;b++)d+='<li class="step">'+(e?e.call(f,b):b)+"</li>";d+="</ol>",this.jWrapper.append(d),g=this.cfg.indexBind?this.jWrapper.find(".slider-steps").on(K.click,".step",function(){var b,c=a(this);c.hasClass("disable")||(b=g.find(".step").index(c),f.moveTo(b))}):this.jWrapper.find(".slider-steps"),this.jSteps=g}function l(){var b,c,d,e,f,g,h,i,l='<div class="slider-wrapper"><div class="slider-content"></div></div>',m=this.cfg,n=this.jBox,o=1,p="h"===m.dir?!1:!0;if(this.isVertical=p,this.jWrapper){var q=a("<div></div>");q.append(n),this.jWrapper.after(n),this.jWrapper.remove(),delete this.jWrapper}n.wrap(l),this.jWrapper=c=n.closest(".slider-wrapper"),this.jItems=b=n.children(),this.jContent=d=c.find(".slider-content"),m.ctrlBtn&&(c.append('<div class="slider-control"><span class="prev"><span class="prev-s"></span></span><span class="next"><span class="next-s"></span></span></div>'),j.call(this,c.find(".prev"),c.find(".next")),this.jCtrl=this.jWrapper.find(".slider-control")),b.length>1?(e=b.width(),f=b.height(),m.unlimit&&(n.append(b.clone()),o=2,2===b.length&&(n.append(b.clone()),o=3),this.jItems=b=n.children()),this.multiple=o,i=b.length/o,p?(this.jItems.height(f),n.height(f*b.length),this.boxHeight=Math.ceil(n.height()/o),d.width(n.width()).height(f),h=this.boxHeight-this.jWrapper.height()+m.offset,this.currentDist=m.index*f):(this.jItems.width(e),n.width(e*b.length),this.boxWidth=Math.ceil(n.width()/o),d.height(n.height()),g=this.boxWidth-this.jWrapper.width()+m.offset,this.currentDist=m.index*e),this.wrapperSize=p?c.height():c.width(),this.itemSize=p?f:e,this.moveUnit=m.unit>0?this.itemSize*m.unit:this.wrapperSize,this.scope=p?h:g,this.stepLength=m.unit>0?Math.round(this.scope/this.moveUnit+1):Math.round(this.itemSize*i/this.wrapperSize),m.indexBtn&&k.apply(this),this.moveTo(m.index,!0)):(this.multiple=1,e=b.width(),f=b.height(),i=1,this.wrapperSize=p?c.height():c.width(),this.itemSize=p?f:e,this.moveUnit=0,this.scope=0,this.stepLength=1,p?(n.height(f),d.width(n.width()),this.boxHeight=f,h=0,c.addClass("slider-no-effect"),this.currentDist=0,this.moveTo(0,!0)):(n.width(e),d.height(n.height()),this.boxWidth=e,g=0,c.addClass("slider-no-effect"),this.currentDist=0,this.moveTo(0,!0)))}function m(a){h.apply(this),this.touched=!0,O=Y(a),Q=!1,R=!1,S=0,T=0,V.push(this),this.timer&&clearTimeout(this.timer)}function n(a){U=V[0],U&&U.cfg.drag&&!U.checkLock()?U.touched&&(P=Y(a),q.call(U,U.isVertical?P.y-O.y:P.x-O.x),Q&&a.preventDefault()):V.shift()}function o(a){U&&(U.cfg.drag&&(O={},P={},Q&&s.apply(U),U.touched=!1,Q=!1),w.apply(U),U.moveDist=0,U=null,V=[])}function p(a,b){if(this.isVertical&&Math.abs(a)>Math.abs(b)||!this.isVertical&&Math.abs(b)>Math.abs(a)){if(V.shift(),V.length)return U=V[0],void p.call(U,a,b);Q=!1,this.touched=!1}else Q=!0;R=!0}function q(a){return R?(S=a>0,S&&this.checkLockPrev()&&(a=0),!S&&this.checkLockNext()&&(a=0),T=a,void r.call(this,a)):void p.call(this,P.x-O.x,P.y-O.y)}function r(a){var b=this.isVertical,d=this.currentDist,e=this.scope,a=d+a;this.cfg.bounce||this.cfg.unlimit||(a=Math.min(0,Math.max(a,-1*e))),c(this.jBox,a,b),this.moveDist=a}function s(){var a=(this.isVertical,this.currentIndex),b=this.moveUnit,c=(this.jItems.length,this.stepLength,Math.abs(T)),d=0;0!==S&&(this.cfg.unlimit?S?this.prev():this.next():(c>b/4&&(d=(S?-1:1)*Math.ceil(c/b)),a+=d,a=Math.max(0,Math.min(a,this.stepLength-1)),this.moveTo(a)))}function t(){var a=this.currentIndex,b=this.cfg,c=this.stepLength,d=this.jPrevBtn,e=this.jNextBtn;b.unlimit?1===c&&(d.addClass("disable"),e.addClass("disable")):(0===a?d.addClass("disable"):d.removeClass("disable"),a===c-1?e.addClass("disable"):e.removeClass("disable"))}function u(){var a=this.currentIndex,b=(this.cfg,this.stepLength);this.jPrevBtn,this.jNextBtn;this.jSteps.find(".step").removeClass("current").eq(a%b).addClass("current")}function v(){return this.currentIndex%this.stepLength}function w(){var a=this,b=this.cfg;b.autoPlay&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var b=a.currentIndex+1;a.cfg.unlimit?a.moveTo(b):(b%=a.stepLength,a.moveTo(b)),w.apply(a)},this.cfg.duration))}function x(){var a,b,c;this.cfg.unlimit&&!this.touched&&(a=this.currentIndex,b=this.stepLength,c=Math.ceil(this.jItems.length*this.itemSize/this.moveUnit),b>1&&(1>=a?(a=b+1,this.setIndexTo(a)):a>=c-2&&(a=c-2-b,this.setIndexTo(a))))}function y(a,b){var c=(this.isVertical,this.jItems.length),d=this.moveUnit,e=this.scope,f=this.cfg.offset,g=(this.multiple,this.stepLength),h=0;return this.cfg.unlimit?g>1?(0>=a?(a=g,this.setIndexTo(a+1)):a>=c-1&&(a=c-1-g,this.setIndexTo(a-1)),h=-1*a*d+f):(a=0,h=f):(a%=c,h=Math.max(-1*a*d+f,-1*e)),b||this.cfg.noAnimate?i.call(this,h,h,0):i.call(this,this.touched?this.moveDist:this.currentDist,h),this.currentIndex=a,this.currentDist=h,this.jSteps&&u.apply(this),this.cfg.ctrlBtn&&t.apply(this),w.apply(this),this}function z(a){var b,d=this.isVertical,e=(this.jWrapper,this.stepLength,this.moveUnit),f=this.cfg.offset;if("NaN"!==a.toString())return b=-1*a*e+f,c(this.jBox,b,d),this.currentIndex=a,this.currentDist=b,this}function A(){var a=this.currentIndex-1,b=this.checkLock()||this.checkLockPrev();if(!b){if(this.cfg.unlimit)this.moveTo(a);else{if(0>a)return;this.moveTo(a)}return this}}function B(){var a=this.currentIndex+1,b=this.checkLock()||this.checkLockNext();if(!b){if(this.cfg.unlimit)this.moveTo(a);else{if(a>=this.stepLength)return;this.moveTo(a)}return this}}function C(c){return this.cfg.unlimit===!0&&D.apply(this),this.cfg=b(a.extend(this.cfg,c||{})),this.timer&&clearTimeout(this.timer),X--,H.apply(this),this}function D(){var b=this.stepLength-1;this.jItems.each(function(c,d){c>b&&a(d).remove()})}function E(){var a="";this.jWrapper.remove();for(a in this)delete this[a];this.__proto__=null,X--,0===X&&G()}function F(){var b=this;this.jContent.on(K.start,function(a){m.call(b,a)}),W||(a(document).on(K.move,n).on(K.end,o),W=!0)}function G(){a(document).off(K.move,n).off(K.end,o),W=!1}function H(){this.currentIndex=this.cfg.index,this.cfg.extendAnimate&&d(this.cfg.extendAnimate),l.apply(this),F.apply(this),w.apply(this),X++}function I(c,d){function e(){return n}function f(){return n=!0,this}function g(){return n=!1,this}function h(){return o}function i(){return p}function j(){return o=!0,this}function k(){return o=!1,this}function l(){return p=!0,this}function m(){return p=!1,this}this.jBox=a(c),this.cfg=b(d||{});var n=!1;this.checkLock=e,this.lock=f,this.unlock=g;var o=!1,p=!1;return this.checkLockPrev=h,this.lockPrev=j,this.unlockPrev=k,this.checkLockNext=i,this.lockNext=l,this.unlockNext=m,H.apply(this),this}var J="ontouchend"in document,K={click:"click",start:J?"touchstart":"mousedown",move:J?"touchmove":"mousemove",end:J?"touchend":"mouseup"},L=function(){var a,b,c=document.createElement("div"),d=c.style,e=["WebkitT","MozT","MsT"],f=0,g=3;for(f;g>f;f++)if(a=e[f],""===d[a+"ransform"]){b="-"+a.replace("T","").toLowerCase()+"-";break}return b}(),M={unlimit:!0,ctrlBtn:!0,indexBtn:!0,unit:1,offset:0,index:0,dir:"h",autoPlay:!1,duration:5e3,bounce:!0,drag:!0,indexBind:!0,noAnimate:!1,animation:"ease-out-back"},N={"ease-out-back":function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},linear:function(a,b,c,d){return a/d*c+b}},O={},P={},Q=!1,R=!1,S=!0,T=0,U=null,V=[],W=!1,X=0,Y=function(a){var b,c,a=a.originalEvent?a.originalEvent:a,d=a.touches;return d?(b=d[0].pageX,c=d[0].pageY):(b=a.clientX,c=a.clientY),{x:b,y:c}};I.prototype=function(){return{prev:A,next:B,setIndexTo:z,moveTo:y,getIndex:v,refresh:C,destroy:E}}(),"function"==typeof define&&define.amd?define([],function(){return I}):"undefined"!=typeof module&&module.exports?module.exports=I:window.NiceSlider=I}(window.jQuery||window.Zepto);